/* ==============================
   Peep Lightning Intro — FULL CSS
   ============================== */

:root{
  --bg:#0b0f14;
  --fg:#e8f5ff;
  --peep:#1bff9e;
  --peep-2:#4dffe3;
  --glow:0 0 20px var(--peep), 0 0 60px var(--peep-2);

  --strike-dur:1100ms;
  --appear-delay:600ms;

  /* Loader */
  --bar-w: clamp(260px, 38vmin, 520px);
  --bar-h: 14px;
}

*{ box-sizing:border-box }
html, body{ height:100% }

body{
  margin:0;
  background: radial-gradient(1200px 600px at 80% 20%, #0f1520 0%, #0b0f14 60%, #070a0f 100%);
  color:var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
  overflow:hidden;
}

/* ---------- ESCENA ---------- */
.stage{
  position:relative; height:100dvh; width:100vw;
  display:grid; place-items:center; perspective:1000px;
}

/* Grid sutil de fondo */
.grid{
  position:absolute; inset:-10%;
  opacity:.05; pointer-events:none;
  background-image:
    linear-gradient(to right, #fff 1px, transparent 1px),
    linear-gradient(to bottom, #fff 1px, transparent 1px);
  background-size:60px 60px;
  mask:radial-gradient(circle at 50% 50%, #000 40%, transparent 75%);
  transform: translateZ(-80px);
  animation: slow 30s linear infinite;
}
@keyframes slow{ to{ background-position: 60px 60px } }

/* Partículas */
.spark{
  position:absolute; width:3px; height:3px; border-radius:50%;
  background: linear-gradient(var(--peep), var(--peep-2));
  filter: drop-shadow(0 0 6px var(--peep));
  opacity:0; transform: translate(-50%, -50%) scale(.8);
  animation: floatUp 3.5s linear infinite;
}
@keyframes floatUp{
  0%{ opacity:0; transform: translate(var(--x,0), var(--y,0)) scale(.5) }
  10%{ opacity:.9 }
  70%{ opacity:.7 }
  100%{ opacity:0; transform: translate(calc(var(--x,0)), calc(var(--y,0) - 160px)) scale(1.1) }
}

/* ---------- LOGO / WRAP ---------- */
.logo-wrap{
  position:relative; width:min(420px, 72vw);
  aspect-ratio:1/1; display:grid; place-items:center;
  transform-style:preserve-3d;
  transform: rotateX(var(--rx,0deg)) rotateY(var(--ry,0deg));
  transition: transform .15s ease-out;
}
.halo{
  position:absolute; inset:0; border-radius:50%;
  background: radial-gradient(closest-side, rgba(27,255,158,.25), rgba(77,255,227,.08) 40%, transparent 65%);
  filter: blur(10px); transform: translateZ(-40px) scale(1.02);
  animation: throb 3s ease-in-out infinite;
}
@keyframes throb{ 0%,100%{opacity:.7} 50%{opacity:1} }

.peep-logo{
  width:70%; filter: drop-shadow(0 0 22px rgba(27,255,158,.45));
  transform: translateZ(40px) scale(var(--scale, .2));
  opacity:0; animation: appear 900ms cubic-bezier(.2,.85,.2,1) var(--appear-delay) forwards;
}
@keyframes appear{ to{ opacity:1; --scale:1 } }

/* Rayo */
.bolt{
  position:absolute; inset:0; display:grid; place-items:center;
  pointer-events:none; overflow:visible;
  filter: drop-shadow(0 0 10px var(--peep));
  opacity:0; transform: translateZ(60px) scaleY(1.05);
  animation: strike var(--strike-dur) cubic-bezier(.17,.95,.35,1.2) 250ms forwards;
}
@keyframes strike{
  0%{ opacity:0; transform: translateZ(60px) scaleY(.7) }
  20%{ opacity:1 }
  55%{ opacity:1 }
  100%{ opacity:0; transform: translateZ(60px) scaleY(1.1) }
}
.bolt path{
  stroke: url(#grad); stroke-width:10; fill:none;
  stroke-linejoin:round; stroke-linecap:round;
  filter: drop-shadow(0 0 18px rgba(77,255,227,.75));
  stroke-dasharray:950; stroke-dashoffset:950;
  animation: dash var(--strike-dur) cubic-bezier(.5,.1,.4,1) 50ms forwards;
}
@keyframes dash{ to{ stroke-dashoffset:0 } }

/* ---------- TÍTULO (subido + shimmer) ---------- */
.title{
  position:absolute; bottom:30vh; left:50%; transform:translateX(-50%);
  letter-spacing:.12em; text-transform:uppercase; font-weight:800;
  font-size:clamp(18px, 3vw, 28px);
  background: linear-gradient(90deg, rgba(255,255,255,.15), var(--peep), rgba(255,255,255,.15));
  background-size: 200% auto;
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow: 0 10px 40px rgba(27,255,158,.12);
  opacity:0; animation: titleShimmer 2.2s linear infinite, fadeUp .9s ease .9s forwards;
}
@keyframes titleShimmer{
  0%{ background-position: 0% 50% }
  100%{ background-position: 200% 50% }
}
@keyframes fadeUp{ from{ transform:translate(-50%, 16px); opacity:0 } to{ transform:translate(-50%, 0); opacity:1 } }

/* CTA */
.cta{ position:absolute; bottom:4vh; left:50%; transform:translateX(-50%) }
.btn{
  --ring:0 0 0 0 rgba(27,255,158,.35);
  display:inline-flex; gap:.6rem; align-items:center;
  padding:.9rem 1.2rem; border-radius:16px; border:1px solid rgba(255,255,255,.08);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  box-shadow: 0 12px 30px rgba(0,0,0,.35);
  color:var(--fg); font-weight:700; letter-spacing:.04em; text-decoration:none;
  backdrop-filter: blur(8px) saturate(140%);
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
}
.btn:hover{ transform:translateY(-2px); box-shadow: 0 18px 48px rgba(27,255,158,.20); }
.btn:active{ transform:translateY(0) scale(.98); }
.btn .dot{ width:8px; height:8px; border-radius:50%; background:var(--peep); box-shadow:var(--glow); }

/* ---------- LOADER (debajo de la P) ---------- */
.peep-loader{
  width: var(--bar-w);
  display:grid; gap:10px; justify-items:center;
  filter: drop-shadow(0 0 10px rgba(27,255,158,.25));
  animation: fadeUp .6s ease .6s both;
}
.peep-loader.inside{
  position:absolute; left:50%; top:75%; transform:translateX(-50%);
}

/* Etiqueta “LOADING” + % */
.pl-label{
  font-weight:900; letter-spacing:.16em; text-transform:uppercase;
  font-size: clamp(12px, 2.4vw, 16px);
  background: linear-gradient(180deg, var(--peep), var(--peep-2));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  display:flex; gap:.28em; align-items:baseline;
  text-shadow: 0 10px 40px rgba(27,255,158,.18);
}
.pl-label span{ transform-origin:50% 70%; animation: pl-bounce 1.4s ease-in-out infinite }
.pl-label span:nth-child(1){ animation-delay:.00s } .pl-label span:nth-child(2){ animation-delay:.05s }
.pl-label span:nth-child(3){ animation-delay:.10s } .pl-label span:nth-child(4){ animation-delay:.15s }
.pl-label span:nth-child(5){ animation-delay:.20s } .pl-label span:nth-child(6){ animation-delay:.25s }
.pl-label span:nth-child(7){ animation-delay:.30s }
@keyframes pl-bounce{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-3px) } }

.pl-percent{ margin-left:.6em; font-weight:900; color:#e8f5ff; text-shadow:0 0 18px rgba(27,255,158,.25) }

/* Barra */
.pl-track{
  width: var(--bar-w); height: var(--bar-h);
  border-radius: 999px; overflow:hidden; position:relative;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.10);
  box-shadow: inset 0 2px 10px rgba(0,0,0,.45), 0 6px 22px rgba(27,255,158,.10);
  backdrop-filter: blur(6px) saturate(140%);
}
.pl-fill{
  position:absolute; inset:0 auto 0 0; width:0%; height:100%;
  background:
    linear-gradient(180deg, rgba(27,255,158,.55), rgba(77,255,227,.55)),
    repeating-linear-gradient(135deg, rgba(255,255,255,.18) 0 10px, rgba(255,255,255,0) 10px 20px);
  border-right:2px solid rgba(255,255,255,.75);
  animation: pl-stripes 1.1s linear infinite;
  box-shadow: 0 0 14px rgba(27,255,158,.35), 0 0 44px rgba(77,255,227,.25);
}
@keyframes pl-stripes{ to{ background-position: 50px 0, 50px 0 } }

/* Orbe eléctrico */
.pl-orb{
  --x: 0%;
  position:absolute; top:50%; left: var(--x); transform: translate(-50%, -50%);
  width:16px; height:16px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #fff, var(--peep));
  box-shadow: 0 0 16px rgba(27,255,158,.9), 0 0 36px rgba(77,255,227,.6), 0 0 60px rgba(77,255,227,.35);
}

/* Badge de porcentaje flotante que sigue la barra */
.pl-float{
  --x: 0%;
  position:absolute; left: var(--x); top: 0; transform: translate(-50%, -140%);
  padding: 6px 10px; border-radius:10px;
  border:1px solid rgba(255,255,255,.16);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  backdrop-filter: blur(6px) saturate(140%);
  box-shadow: 0 8px 18px rgba(0,0,0,.35), 0 0 24px rgba(27,255,158,.18);
  font-weight:800; font-size:12px; letter-spacing:.06em; color:var(--fg);
  white-space:nowrap;
}
.pl-float span{ display:inline-block; animation: hudBlink 1.6s ease-in-out infinite }
@keyframes hudBlink{ 0%,100%{opacity:.95; transform:translateY(0)} 50%{opacity:1; transform:translateY(-1px)} }

/* Lobo corriendo que sigue el progreso */
.wolf-icon{
  --x: 0%;
  position:absolute; left: var(--x); top: -18px; transform: translate(-50%, -100%);
  width:26px; height:13px; filter: drop-shadow(0 0 10px rgba(27,255,158,.55));
  animation: wolfRun .6s steps(2) infinite;
}
@keyframes wolfRun{
  0%{ transform: translate(-50%, -100%) scale(1) }
  50%{ transform: translate(-50%, -100%) scale(1.04) }
  100%{ transform: translate(-50%, -100%) scale(1) }
}

/* Accesibilidad */
@media (prefers-reduced-motion: reduce){
  .grid,.spark,.halo,.peep-logo,.bolt,.title,.pl-label span,.pl-fill{ animation: none !important }
}
